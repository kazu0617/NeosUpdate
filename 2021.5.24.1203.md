**2021.5.24.1203**
皆さん、こんにちは。今回も小規模なビルドですが、いくつかの最適化を行いました。MTCのテスト中に、ワールドのUIがいくつかの問題を引き起こしているという情報を得て、クライアントサイドとサーバーの両方で最適化すべきことがいくつか見つかりました。リソースの無駄を省くために、セッションのサムネイルシステムにいくつかの変更が加えられました。例えば、UIが見えないとき（ダッシュボードが閉じていたり、別の画面にいたりするとき）にサムネイルをロードして更新したり、同じサムネイルを再圧縮、再アップロード、再ダウンロードしたりしていました。

また、より一般的な最適化として、UIXキャンバスは、非アクティブな場合、実際の更新をデファーするようになりました。これは、あなたから見えないUI（例：閉じたダッシュ、非アクティブなダッシュ画面、コンテキストメニュー、ワールドでカリングされたもの）が不必要にバックグラウンド計算を行い、CPUサイクルとメモリを浪費するのを防ぐためです。

これらは全体的に、バックグラウンドでの不要なリソースの消費を減らし、動作を少し良くするのに役立つはずです。今週のアップデート一覧（Steamの更新一覧から確認できます）を書く予定があるため、今のところ、これ以上の情報がなくて申し訳ありません。

**最適化**
- UIXキャンバスの更新は、非アクティブなときには延期されるようになりました（階層内で直接行われる場合もあります）。
-- これには、ダッシュ（バックグラウンドでレイアウトを更新するワールドやコンタクトのUIなど）や、ワールドスペースのキャンバス（開いていない時のコンテキストメニューなど）が含まれます。
-- これにより、アバターやレベルのカリングシステムを使用する際に、実際のUIを表示する必要があるまで生成しないことで、CPUやメモリへの影響を軽減することができます。
- セッションを開始/参加するユーザーの負荷を軽減するため、セッションサムネイルの取得間隔を調整
- ワールドメニュー用の新しいセッションサムネイルのダウンロードを、非アクティブ時には延期するようにし、UIが表示されていないときに不必要なダウンロードやサムネイルの処理を行わないようにしました
-- これにより、ダッシュが解除されていても、ワールドでランダムにヒッチが発生するケースが修正されるはずです（Rue Shejn | Artist 3D と Nexulan | Producer の報告に基づく）。
-- 一部のユーザーでは、ギャザージョブが過負荷になり、ダウンロードができなくなるケースがありました（報告者：ProbablePrime｜Docs, I'm Erin.およびKitten_of_Codes)
- セッションサムネイルのダウンロードをCDNに移動し、パフォーマンスとメトリクスの向上のために、直接blobをダウンロードしないようにしました。
- `StaticTexture2D`がDirectLoadに設定されている場合、メタデータの計算タスクがスキップされるようになりました。
-- これにより、特にDirectLoadを使用するセッションサムネイルにおいて、不要なCPU負荷とメモリ使用量が削減されます。
- アップロードされたサムネイルは、データベース内の公開URLと関連付けられるようになりました。これにより、ユーザーが自分のサムネイルを再ダウンロードしなければならず、リソースが無駄になることを防ぎます。
- ヘッドレスは、他のソース（セッション内のユーザーや世界のサムネイル）からのセッションサムネイルの再アップロードや再圧縮を行わず、直接のURLを使用するようになりました。
-- これにより、同じサムネイルの異なるバージョンを再ダウンロードすることによる不要なネットワーク帯域幅やCPU/メモリ使用量を削減し、キャッシングメカニズムをより効果的に利用できるようになります。
- Ruzさんによるスペイン語翻訳の追加を適用（新しいMTC Streamer Roomを含む）
- rampa_3さんによるチェコ語翻訳の追加を適用

**バグ修正**
- セッションユーザの出力デバイス(SessionUser head output device)が整数としてシリアル化されている場合、列挙型が変更されると互換性に問題が生じる可能性があるため、移行コードを追加した
- ルート上のRectTransformが非アクティブになり、グラフィックチャンクがダーティとしてフラグを立てて再アクティブにしないと、UIXキャンバスが見えなくなる問題を修正
- DynamicField<T> と CloudValueField<T> は、読み取り専用のフィールド (RawOutput<T> など) が指定された場合、それを認識し、ログに例外が発生しないように書き込みを回避するようになりました (RezilloRyker の報告に基づく)
- シーン階層が深すぎるためにヘッドレスが特定のワールドやオブジェクトをロードできない問題を修正しました（報告者：Shadow Panther、Torrn)