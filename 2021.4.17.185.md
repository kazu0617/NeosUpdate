**2021.4.17.185**
皆さん、こんにちは。私は三人称モードのための大きな改良を行いました！ :smile: カメラは、クリッピングスルーを避けるために、ワールドとのオクルージョンを検出するようになり、位置を調整する際にはよりスマートになりました。例えば、カメラがキャラクターの前にあっても、アバターがすぐにカメラに背を向けずに移動できるようになりました(なんてことでしょう！)。また、多くのバグフィックスにより、使い勝手の問題も解決されています。

特に、96kHz以上のオーディオ出力デバイスに切り替えたときのクラッシュなど、より重要な修正も含まれています。これにより、一部のユーザーから報告されていたオーディオの不具合が解消されるかもしれませんが、さらなるテストが必要です。

Ctrl+D、Ctrl+Shift+Dなどのショートカットも修正されました。これは思っていたよりも非常に厄介でしたが、入力バインドシステムに一般的な機能を追加することで解決しました。これが今回のビルドに時間がかかった理由の一つで、この他にもいくつかの問題がありました。

また、3人称モードの一時的なキーをAltではなくF5に変更しました。これはまだ一時的なものなので、他のカメラモジュールの問題を解決してから、適切なバインディングができるようにしたいと思います。

**新機能**:
- 入力バインディングシステムに、特定の順序で押されない限り入力をブロックしない、順序付き入力ゲートのサポートを追加しました。
-- これにより、Ctrl+右マウスボタンでカメラをパンする機能が追加された後、Ctrl+D、Ctrl+Shift+D、Ctrl+Shift+Sがホールドされたオブジェクトの削除に使えなくなったのを修正しました(3x1t_5tyl3、Toxic_Cookie、AshtonSparxが報告)。
-- カメラをパンするには、Ctrlを押しながら、右マウスボタンを離す必要があります。

- ボタンを押したときに対象の文字列に文字列を追加するButtonStringAppendコンポーネント(Common UI/Button Interactions)を追加しました(Rue Shejn | Artist 3DとAegis_Wolf | Art Directorのリクエストに基づく)。
-- 前方への付加にも対応しています。
- ボタンを押すと対象の文字列から指定した文字数を消去するButtonStringEraseコンポーネント(Common UI/Button Interactions)を追加。
-- 最後からも最初からも消せるようになりました。

- 三人称カメラが環境とのオクルージョンを検出し、ジオメトリのクリッピングを避けるためにカメラを近づけるようになりました (現在はキャラクターのコリダーのみを検出していますが、もう少しスマートな動作に変更する可能性があります)

- 次の第75回NCRバッチに備えて、CDFTバッチを処理するための内部アルゴリズムを実装しました(Karel | CEOからの依頼)。
- Neos Essentials」と「Essential Tools for the Neos Team」に誤って保存されないようにするための内部的な保護機能の実装

**微調整**:
- 3 人称モードでインタラクションを行う際、カメラが上方向に移動しなくなり、横方向にのみ移動するようになりました。
- 3人称視点のカメラが、主な手の方向ではなく、インタラクション時にカメラがパンされた方向にオフセットするようになりました。
-- これにより、物とのインタラクション時にカメラがキャラクターの反対側に移動するケースが修正されました。
- インタラクション時の三人称視点のカメラのオフセットが、カメラの距離に比例するようになりました。
- 三人称モードのキャラクターが、カメラを前に振りかざしたときに、頭をまっすぐにするのではなく、カメラの方を向くようになりました。
- 三人称モードのキャラクターは、角度差が十分に大きい場合、体をインタラクションターゲットの方に向けるようになりました。
-- カメラに近づきすぎて掴んだものを動かしたり、遠すぎるものとインタラクトしたりすると、腕や手が不自然な角度で曲がってしまうのを修正しました。
- 三人称モードのキャラクターが、カメラと一致しない方向に歩いているときには向きを維持し、前に向かって歩いているときには向きを変えるまでにわずかな遅延が発生するようになりました。
-- これにより、カメラが正面にある状態で、キャラクターが後ろを向かずに移動できるようになりました。
- 三人称モードで、スポーンされたダイアログの位置を調整しました(まだ調整が必要ですが、今のところ改善されています
- 1人称と3人称を切り替えるキーを、当面はF5に変更(3x1t_5tyl3氏とProbablePrime氏のフィードバックに基づく
-- なお、これは一時的な変更であり、モードの追加や改良が行われた後はAltキーが何らかの形で使用されることになりますが、これにより当面はいくつかの矛盾が解消されます。
- 三人称モードのルックスピードを調整

**バグ修正**:
- オーディオ出力デバイスのタイミングロジックを改善し、オーディオがグリッチ/スタッタリーになるケースを改善しました(previously reported by Jaiden#1262, Shadow Panther [RU/EN, UTC+3])
- 対象となる友人が現在のステータスを更新していない場合(例：Neosにログインした場合)、クラウド上の友人を更新(例：フレンドリクエストの受け入れ)すると壊れてしまう問題を修正しました(ProbablePrimeにより発見)。
- 高いサンプリングレート(例：96kHz)のオーディオ出力デバイスを選択するとNeosがクラッシュする問題を修正しました(報告者：Shifty | Quality Control Lead, Cyro, Tatsu Kimiero, Hayden, httmj#3473, Amu(Rabbuttz), Alex Thorin
- 利用可能なサンプルがないソースからサンプルをコピーしようとすると、オーディオサンプルの処理が壊れる問題を修正しました。
- 特定のアカウントで再帰的クラウド検証ジョブが失敗することがあった問題を修正
- Fixed 2つのベクトル間の角度測定が、入力ベクトルと類似しすぎているため、結果がNaNになることがあります。
-- 既存のビヘイビアやお客様のカスタムビヘイビアの微妙でランダムなエラーを修正します。
- デバッグテストが実際のビューの前ではなく、頭部の前に表示される問題を修正
- デスクトップモードで設定可能なFOVの最小値をクランプし、誤って値を0に設定した場合の混乱を回避(Fuzy SidwellとShifty | Quality Control Leadの報告による。
- ワールド内のフォーカスされた要素(インスペクタのテキストフィールドなど)が破壊された後、ユーザースペースのキーボード入力がブロックされ、ダッシュを開けなくなる問題を修正(reported by Shifty | Quality Control Lead and Cyro)
- 三人称モードでのインタラクションの開始距離が、現在のユーザーのスケールに合わせて補正されていなかったのを修正(これにより、小さすぎるとインターフェイスやコンテキストメニューが使えなくなるのを修正、Shifty | Quality Control Lead、epicEaston197、ChrisWarner103 (DelVR)が報告)。
- 三人称モードで、拡大・縮小したときにコンテキストメニューの位置がおかしくなる問題を修正(上記報告に基づく)