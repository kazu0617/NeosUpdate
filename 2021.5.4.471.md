**2021.5.4.471**

皆さん、こんにちは。このビルドの作成に少し時間がかかってしまいましたが、新しいグッズの数々をご紹介します。新しいデスクトップモードでは、UIカメラモードが追加されました。Ctrlを押しながらUIを左クリックすると、ビューがUIに合わせて表示されます。何もないところでCtrl+左クリックをするとリセットされます。アクティブな状態では、Ctrl+右マウスでパン、Ctrl+スクロールでズームを調整することもできます。これにより、デスクトップでのUIやLogiXの操作がより簡単になります。しかし、まだいくつかの不具合や実装されていないものがあるので、いくつかの問題に遭遇するかもしれません。

クラウド変数システムは、より柔軟性を高めるために新しい権限が追加されました（特にユーザー定義変数に多くの機能を追加）。また、Headlessでのアクセスやロールコントロールにも使用できるようになりました。

その他にも、メッシュを最適化するために上書きが行われていないブレンドシェイプをベイクする機能や、新しい+/i LogiXノードなど、いくつかの優れた機能があります。モデルのインポートの堅牢性も改善され、一部のモデルでインポートに失敗するケースや、しばらくプレイしていないユーザーが起動時にNeosをクラッシュさせてしまうケースを修正しました。Contacts+ の問題も解決されています。

**新機能**:
- 新しいデスクトップモードにUIカメラモードを追加しました。UIの平面にビューを合わせ、カーソルを解放して簡単に操作できるようになりました。
-- 起動するには、Ctrlキーを押しながら、フォーカスしたいUI上で左マウスボタンでクリックします。これを繰り返すことで、別のUI要素に合わせることができます。
-- 解除するには、Ctrlキーを押しながら、何もない場所で左マウスボタンをクリックします（代わりにF5キーを押すとカメラモードが切り替わります）。
-- アクティブな状態で、Ctrl+右マウスボタンを押すと、ビューをパンすることができます。
-- このモードがアクティブな間は、Ctrlキーを押しながらスクロールホイールを使ってズームイン／アウトすることができます。
-- このモードがアクティブな間、掴んだアイテムやスポーンしたLogiXノードは、現在フォーカスされているUIの平面上を移動します。
- `roleCloudVariable` 設定オプションをヘッドレスワールドに追加し、クラウド変数に基づいて役割を自動で割り当てることができるようになりました（Geenz｜グラフィックプログラマー、Avinash｜WeMakeVRなどのイベント開催に関する要望に基づくものです）。
-- クラウド変数を定義し、その値をユーザーに割り当てることで、与えられた世界でのユーザーの役割を決定することができます。
-- 変数は文字列型である必要があります。割り当てる値は、与えられたユーザーに与えたい役割の名前と同じです。
-- 他のユーザに代わって書き込むことができるクラウド変数（definition_owner）を使用することを強くお勧めします。そうしないと、ユーザが自分に高い権限のロールを割り当てることができるかもしれません。
-- ユーザーに値が設定されていない場合は、通常の方法でデフォルトロールを決定します。
- 自動起動/ヘッドレスワールド用の設定オプション allowUserCloudVariable を追加し、クラウド変数を使用して常にユーザーをセッションに入れることができるようにしました。
-- クラウド変数は bool 型である必要があり、与えられたユーザに対して true に設定されます。
-- これは、ユーザーに招待状が送られたのと同じことで、MaxUsers の制限に関わらず、またセッションが Private に設定されていても参加できます（ユーザーは取得する必要があります）。
-- 上記と同様の推奨事項が適用されますので、自分が適切にコントロールできる正しいクラウド変数を使用するようにしてください。

- より柔軟性を持たせるために、新しいクラウド変数の権限設定を追加しました（これにより、Epsilion, DrFrank, Robyn (QueenHidi), Toxic_Cookie などから寄せられた問題が解決されました）（追加された権限は`definition_owner_only_contacts` /  `definition_owner_only_contacts_unsafe` /`variable_owner_only_contacts` / `variable_owner_only_contacts_unsafe`です。詳細は下記の通り）。
--- これらは、その変数の値が、その定義の所有者によってのみ存在する（書き込まれる）ことを意味します（つまり、他のユーザは値を一切持つことができません）ので、「中心的な」告知変数に便利です。
--- これらの権限はユーザー定義の変数でも機能します。
-- `definition_owner_only_contacts` / `definition_owner_only_contacts_unsafe`
--- 変数の値は、定義の所有者が認めたコンタクトを持つユーザに対してのみ書き込めます。
--- この権限はユーザー定義の変数にのみ有効です。グループを必要としないクラウド変数のタグ付けのユースケースを可能にします。
-- `variable_owner_only_contacts` / `variable_owner_only_contacts_unsafe`
--- これは、与えられた値の所有者の連絡先である誰もが、与えられた値を読み書きできるようにします。
--- これはUser変数とGroup変数の両方に有効な権限設定です。

- SkinnedMeshRendererに `Bake Non-driven BlendShapes(使用していないブレンドシェイプを除去)`を追加しました。
-- これは、ドライブされていないブレンドシェイプをベースジオメトリにベイクします。一度しか変更されない設定のブレンドシェイプが多いモデルでは、これにより大幅な最適化が可能となり、メモリの使用量や与えられたメッシュのロード時間が削減されます。
-- これは破壊的な操作であることに注意してください。後でブレンドシェイプを変更したい場合は、ベイクされていないコピーを残しておき、公開用にベイクすることをお勧めします。
-- ブレンドシェイプ分割の最適化と連動させることもできます。顔のアニメーションだけを残してすべてのボディのブレンドシェイプをベイクすると、分割がより効率的になります。
- 演算子の下に+/- LogiXノードを追加（UkilopとKierDranからのリクエスト)
-- これは値とオフセットを入力とし、オフセットを加えた値とオフセットを引いた値を出力します。

**調整**:
- 異なるカメラモード（1人称、3人称、UI）を切り替える際に、短いトランジションが発生するようになりました。
- **アセットダウンロード用の高速CDNサーバーが全員に有効になりました（100％最終的なものではなく、この変更によるインフラコストへの影響をテストしており、元に戻す可能性もあります）。**
- `/listGroupVars <group>` コマンドは、他のコマンドと同じ引数の解析を使用するようになりました（AlienInArea51 (MR-Alex)のフィードバックに基づく）。
-- これにより、`/listGroupVars "Group Name"` が動作するようになり、`/listGroupVars Group Name` が必要ではなくなりました。
- ボーン/ブレンドシェイプの対称性を検出する機構について、孤立した文字が一般的に知られた名前の一部である場合、それを抑制するようになりました。
-- ボーン／ブレンドシェイプに対称的な名前がないにもかかわらず、左右に検出されるケースが修正されました（3x1t_5tyl3の報告に基づく
- ギズモのスケールはアバターの頭ではなく、実際の視点からの距離に基づくようになりました。
- 数ヶ月前に行われたMetamovieイベント用の古くなった一時的なコードを削除

- Turk氏による英語翻訳の追加を反映
- MirPASEC氏による韓国語翻訳の更新を反映
- Shadow Panther氏によるロシア語翻訳の追加を反映
- Yellow氏によるエスペラント語翻訳の追加と更新を反映
- brodokk氏によるフランス語翻訳の追加を反映（新しいMTC文字列を含む）
- art0007i氏によるポーランド語翻訳の追加を反映（新しいMTC文字列を含む）

**バグ修正**:
- すべてのクラウド変数コマンドにパス検証を追加し、パスに無効な文字が含まれている場合に報告するようにしました
- floatQおよびdoubleQのクラウド変数がパーサーを正しく取得できず、これらのデータ型を使用しようとすると例外が発生する問題を修正しました（reported by jeana）。
- ボーン/ブレンドシェイプの名前のヒューリスティックが、一部のケースで、左であるべきキラリティを右と判断していたのを修正
- 正面から見たときにUI要素がZファイティング(重なってギザギザに見えるアレ)していたのを修正
-- 既存のカスタムUIも自動アップグレードが試みられ（OffsetUnitsを5に設定）、すべてのカスタムUIが修正されますが、設定によってはこの問題を修正するために手動で更新する必要があります。
-- これにより、デスクトップ・モードでコンテキスト・メニュー・オプションが反転する場合があることも修正されます。
- ActiveUserの新しいバリアントにより、 `variable_owner` に設定した場合においてワールド内で書き込み可能になっていたのを修正しました。 (reported by Shadow Panther [RU/EN, UTC+3])
- ハンドリグがあるが、実際のジオメトリにウェイトペイントされていない場合、リグ付きメッシュのインポートが失敗する問題を修正しました。 (based on report and sample model by GearBell)
- Neosが読み込み時に、実際のタイプではなくデフォルトの文字列変数バリデータを使用するため、256文字以上の文字列がNULLとして読み込まれることがあったのを修正(reported by Epsilion)
- ホストと友達でない時に Contacts+ のセッションに参加できなかったのを修正（Raith (CytraX), Shifty | Quality Control Lead, Shadow Panther [RU/EN, UTC+3] and othersにより再報告された
- 新しいasync/awaitローカルデータベースAPIのためにオーディオ設定のアップグレード処理が壊れていたのを修正しました(repoted and logs provided by H3BO3 and Flip)
-- しばらくプレイしていないユーザーがNeosを起動できないのを修正しました
- 最後のキーを離した後に入力ゲートが無効にならない問題を修正
-- また、3人称モードでカメラをリセットするためのCtrl+右マウスボタンのダブルタップが機能しない問題も修正されています。

**既知の問題**:
- UIカメラモードでは、近くのクリッピングがまだ調整されていないため、アバターと他のアイテムが交差することがあります
- UIカメラモードで遠くのアイテムを掴むと、現在の距離を維持するのではなく、平面にスナップしてしまいます
- UIカメラモードでLogiXのワイヤーを削除することはまだうまくできません
