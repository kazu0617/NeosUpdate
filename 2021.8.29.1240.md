**2021.8.29.1240**
皆さん、こんにちは。今回のビルドでは、たくさんの新しい機能とバグフィックスが追加されています。

Neosに字幕ファイルをネイティブにインポートできるようになりました。これは様々なワークフローに役立ちます。字幕ファイルはネイティブのNeosアニメーションファイルに変換され、様々な目的のために時間ごとにサンプリングすることができ、カスタムコンテンツを含むあらゆるものと同期させることができます。

これに関連して、LogiXはいくつかのアセットタイプへのアクセスが少し拡張されました。静的な2Dテクスチャのピクセルを読み取ることができるようになりました（UVまたはピクセルの位置で）。これは、2Dの空間情報をテクスチャデータにエンコードして、独自のロジックに使用する必要がある場合に役立ちます。同様に、LogiXからアニメーショントラックをサンプリングして、時間を入力として使用し、その上にクールなシステムを構築することができます。

また、非常に重要なバグ修正もあります。ヘッドレスがマスタークロックを同期していなかったのは、ヘッドレス自身がストリームを持っていなかったからだと判明しました。これは、ビデオやオーディオの再生、LogiXのセットアップなど、ヘッドレスセッションで多くのものが同期しなくなるという、ちょっとした連鎖効果をもたらしていましたので、これで一挙に多くの問題が解決されることを期待しています

また、BEPUv2からの最新のアップデートをアップストリームにマージし、ローカルのみのビルドではなく、Azureパイプライン上でビルドするようにすべてを整理しました。これには、衝突のエッジケースの改善や、フォークでは欠けていた小さな最適化も含まれています。

**BEPUv2構造をベースとしてダイナミックボーンの最適化を設計しています**が、これにはもう少し時間がかかりそうなので、それまでにこれをリリースします。いくつかの予備的なプロファイリングによると、これでまた素晴らしいパフォーマンスが得られるはずです。

**新機能**
- **ネイティブ字幕の読み込みをサポートしました**。
-- 以下のフォーマットをサポートしています: srt, sub, ssa, ttml, vtt
-- 字幕は Neos ネイティブアニメーション (AnimX) で変換され、文字列のキーフレームを持つトラックになります。これは、ビデオやその他の再生と同期するために使用することができます（カスタムNeosコンテンツを含む - それらは単にテキストの断片であるキーフレームを持つアニメーションとして扱われます）。
-- なお、ビデオファイルに埋め込まれた字幕はまだサポートされていません。
- `PlaybackSynchronizer`を追加しました。これはある再生を別の再生に同期させるものです。
-- オプションで、異なる長さのクリップの正規化された位置を同期させることができます。
-- 両方のプレイバックはまだ個別であり、わずかなジッターがあることに注意してください。これは完全な同期を保証するものではありませんが、同期されるものにもよりますが、一般的には十分低いはずです。
-- ポジションオフセットとポジションレートを指定することができます（これは速度も調整します）。
- `GetAsset<A>`ノードを追加しました（ノードブラウザ,Assetsの下）これは入力アセットプロバイダーからアセットを取得します（例えばStaticTexture2Dを接続するとTexture2Dが得られます）。
- `Sample Texture2D UV` ノード (ノードブラウザ,Assetsの下)を追加しました。これは与えられたUV座標のテクスチャカラーをバイリニア補間でサンプリングします。
-- テクスチャーのデータにアクセスするためには、CPUでの読み込みをサポートするフォーマット（ブロック圧縮されていないなど）であることが必要です。
- `Texture2D Format`ノード（ノードブラウザ,Assetsの下）を追加しました。
- `Get Texture2D Pixel`ノードを追加しました（Assetsの下）。与えられたテクスチャの特定のミップレベルの特定のピクセルを取得することができます。
-- この機能を使用するには、テクスチャが読み取り可能であるとマークされている必要があります(訳註: StaticTexture2D等にそういった項目があります。詳しくは先日の更新内容を確認してください)。
-- 位置やミップマップが範囲外の場合は、クリアカラーが返されます。
- `SampleAnimationTrack<T>`ノードが追加され、インポートされたアニメーションから指定されたタイムポイントで値をサンプリングできるようになりました。
-- Tは対応するアニメーショントラックと同じ型でなければならない。そうでない場合は動作しない
- 与えられたノードとプロパティに対するトラックのインデックスを見つける FindAnimationTrackIndex を追加しました。
-- 一致するトラックが見つからない場合は-1を返す
-- この値を毎回フェッチするのではなく、キャッシュすることをお勧めします。常に同じアニメーショントラックを使用している場合は、前もって保存しておくこともできます。
- `VideoTexture` に `CurrentClockError` を追加しました。これは、ビデオ再生エンジンによって報告されたビデオ再生の現在の時間オフセットを、Neos の希望する再生位置に提供するものです。
-- これは、診断や、他の再生コンポーネントをビデオに合わせて修正するために使用できます（ジッターがあるため、生の値を使用するのではなく、何らかのスムージングを適用する必要があるかもしれません）。

- DiscreteAnimationTrackタイプを内部に追加しました。これにより、一般的にはより疎な "Hold "タイプのキーフレームを効率的に保持することができます。

**セキュリティ**:
- 古い`ChildrenSynchronizer`コンポーネントを削除しました (Ticket #145123)
-- これは、インベントリが実装される前に作られた、半ば壊れた状態のコンポーネントであることと、完全に再設計しなければ解決できないセキュリティ問題が新たに見つかったことによるものです。
-- ワールド間で物を移動させたい場合は、インベントリを使用するか、物をつかむようにしてください、この方が移動する物をよりコントロールでき、より確実です。
- 内部モデレーションシステムの改善
**微調整**:
- 最新のBEPUv2アップストリームの変更をNeosが使用するフォークにマージしました。
-- 三角形と円筒の衝突のコーナーケース処理を改善しました。
-- 凸包(Convex Hull)の生成で無効な包を生成する問題を修正しました。
-- 様々な小さな最適化
- **Neos は起動時に、診断と参照のためにサポートされているファイル形式を表示するようになりました。**
- BEPUv2のソースから直接修正してもらったため、無効な凸包の形状に対しての回避策を削除
- 入力デッドゾーンの動作を元に戻しました（GitHub Issue #2613に基づいて変更されました）。
-- ジョイスティックを完全に真っ直ぐに傾けることができないため、前方に移動すると少量の旋回が発生していたのを修正(reported by Veer | CMO)

- Ruz さんによるスペイン語翻訳の追加を適用
- @Aesc さんによる日本語翻訳の調整を適用（いつもありがとうございます）。

**最適化**:
- BoundingBoxコードの最適化
- BEPUv2で忘れられていたCompound colliderテストのオーバーライドを修正し、いくつかのケースでパフォーマンスが低下した
- 特定のフレームでエンコードすべきネットワークストリームがない場合に、メモリストリームがリサイクルされず、不要なメモリ割り当てやCPU使用量の増加につながる問題を修正
- 未使用のコライダーのメタデータ処理を削除
**バグ修正**:
- **他のストリームパケットが送信されていない場合（典型的なヘッドレスホスト）に、通常のストリームパケット送信を追加し、マスタークロックがドリフトするケースを修正**
-- これにより、多くの時間同期の問題が修正されます。以下に例を記載します。 (報告: Enverex, Jolts, Axius, AshtonSparx, Ikani [she/her], Party_Grunt, GitHub Issue #2895)
-- ビデオ、オーディオ、アニメーションの再生
-- 一部のユーザーで音声が再生されない問題 (報告: Enverex and Shadow Panther [RU/EN, UTC+3], GitHub Issue #2890)
-- アニメーションのパラメータにTを使用しているLogiX
-- パンナー、スピナー、ウィグラーなどの時間ベースのドライブを使用したコンポーネント
-- ストップウォッチや経過時間などの時間ベースのノード
- フレンド(Contact)のイベント処理でデータ構造を初期化せずに使用していた問題を修正
- BEPUv2との統合において、初期化されていないデータ構造を処理すると、破損の原因となる可能性があるため修正しました。
- AudioOutput の音量が、ユーザーの音量設定が適用される前にクランプされていた問題を修正し、ユーザーが設定した最大音量を超えないようになりました（報告: AshtonSparx、GitHub Issue #2894）。
- TriggersOnly が false であるにもかかわらず、CharacterEventTrigger と CharcterForceField が Triggers にしか反応しない問題を修正しました (報告: Shifty | Quality Control Lead and Green, GitHub Issue #2891)